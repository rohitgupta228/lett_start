var baseURL = "http://127.0.0.1:8000/api/";
!function ($) {
  var API = function () { }
  API.prototype.get = function (endPoint, payload) {
    return new Promise(function (resolve, reject) {
      $.ajax({
        type: "GET",
        url: baseURL + endPoint,
        headers: {
          'authorization': 'Bearer ' + localStorage.getItem("token")
        },   
        success: function (resp) {
          if(resp.hasOwnProperty('data')) {
            resolve(resp.data);  
            return;
          }
          resolve(resp)
        },
        error: function (error) {
          reject(error)
        },
        complete: function () {
          console.log("get completed")
        }
      });
    })
  }
  API.prototype.post = function (endPoint, payload) {
    return new Promise(function (resolve, reject) {
      $.ajax({
        type: "POST",
        dataType:"json",
        url: baseURL + endPoint,
        contentType:"application/json",
        data: JSON.stringify(payload),
        success: function (resp) {
          if(resp.hasOwnProperty('data')) {
            resolve(resp.data);  
            return;
          }
          resolve(resp)
        },
        error: function (error) {
          resolve(error);
        },
        complete: function () {
          console.log("post completed")
        }
      });
    })
  } //init App
  API.prototype.getWithoutToken = function (endPoint, route) {
    return new Promise(function (resolve, reject) {
      $.ajax({
        type: "GET",
        url: route && route !== "" ? route : baseURL + endPoint,
        success: function (resp) {
          if(resp.hasOwnProperty('data')) {
            resolve(resp.data);  
            return;
          }
          resolve(resp)
        },
        error: function (error) {
          reject(error)
        },
        complete: function () {
          console.log("get without token completed")
        }
      });
    })
  }
  API.prototype.postWithoutToken = function (endPoint, payload, route) {
    return new Promise(function (resolve, reject) {
      $.ajax({
        type: "POST",
        url: route && route !== "" ? route : baseURL+endPoint,
        headers: {
          Accept: "application/json"
        },
        data: payload,
        success: function (resp) {
          resolve(resp);
        },
        error: function (error) {
          resolve(error);
        },
        complete: function () {
          console.log("conpleted ==>")
        }
      });
    })
  } //init App
  $.API = new API, $.API.Constructor = API
}(window.jQuery)