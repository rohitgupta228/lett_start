var staticCacheName = 'site-static-v1';
var assets = [
  '../js/plugins.min.js',
  '../js/api.min.js',
  '../js/app.min.js',
  '../css/plugins.min.css',
  '../css/style.min.css',
  '../images/',
  'https://fonts.googleapis.com/css?family=Barlow:300,400,500,600,700|Nunito:300,400,600,700&display=swap'
];

// install event
self.addEventListener('install', function(evt) {
  evt.waitUntil(
    caches.open(staticCacheName).then(function(cache) {
      cache.addAll(assets);
    })
  );
});

// activate event
self.addEventListener('activate', function(evt) {
  evt.waitUntil(
    caches.keys().then(function(keys) {
      var deleteCache = keys.filter(function(key){
        return key !== staticCacheName
      }).map(function(key){
        caches.delete(key)
      })
      return Promise.all(deleteCache);
    })
  );
});

// fetch event
self.addEventListener('fetch', function(evt) {
  evt.respondWith(
    caches.match(evt.request).then(function(cacheRes) {
      return fetch(evt.request) || cacheRes;
    }).catch(function(error) {
      console.log('Network Only fetch failed', error);
    })
  );
});