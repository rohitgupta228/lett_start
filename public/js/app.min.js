function convertSerializeObj(e){var o={};return e.forEach((function(e){o[e.name]=e.value})),o}!function(e){var o=function(){};o.prototype.init=function(){var o=window.location.href.split(/[?#]/)[0],r=window.location.pathname.split("/");["vendors/boxicons/css/boxicons.min.css","css/plugins.min.css","css/style.min.css"].forEach((function(e){r.includes("theme")&&(e="../"+e);var o=document.createElement("link");o.rel="stylesheet",o.href=e;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)})),this.hideLoader();var n=this;e(".accordion .collapse").length&&(e(".accordion .collapse").on("show.bs.collapse",(function(){e(this).parents(".card").addClass("active")})),e(".accordion .collapse").on("hide.bs.collapse",(function(){e(this).parents(".card").removeClass("active")}))),e(".back-top").length&&e(".back-top").on("click",(function(){e("html, body").animate({scrollTop:0},500)})),e("#support-link").on("click",(function(){if(null!==localStorage.getItem("token")){var o="support.html";window.location.pathname.split("/").includes("theme")&&(o="../"+o),window.location.href=o}else e("#loginModal").modal("show")})),e(".navbar-header .navbar-toggler").on("click",(function(){var o=e(this).attr("data-target");e(o).slideToggle().removeClass("collapse")})),e("#choose-file").on("click",(function(){e("#upload-image").trigger("click")})),e("#resetModal").length&&e("#resetModal").on("hide.bs.modal",(function(){window.history.pushState({},"",window.location.origin+window.location.pathname)})),e(".header .navbar-nav .nav-link").each((function(){this.href==o&&e(this).addClass("active")})),e(".password-group .icon-view").on("click",(function(){e(this).parent().toggleClass("active");var o=e(this).siblings("input");"text"===o.attr("type").toLowerCase()?o.attr("type","password"):o.attr("type","text")})),e(".modal").modal({backdrop:"static",keyboard:!1,show:!1}),e("#forgot-btn").on("click",(function(){e(".auth-modal").modal("hide"),e("#forgotModal").modal("show")})),e("#register-btn").on("click",(function(){e(".auth-modal").modal("hide"),e("#registerModal").modal("show")})),e("#login-btn, #forgot-login-btn, #auth-btn").on("click",(function(){e(".auth-modal").modal("hide"),e("#loginModal").modal("show")})),e(".header .navbar-nav .dropdown-item").each((function(){this.href==o&&(e(this).addClass("active"),e(this).parents(".dropdown-menu").siblings(".nav-link").addClass("active"))})),e("#upload-image").on("change",(function(){e("#choose-file").find("span").hide(),e("#choose-file").find(".btn-loader").show();var o=this.files[0];n.loadImg(o,this)})),e("#search-form").on("submit",(function(){var o=e(this).find(".form-control").val(),r=new URLSearchParams;r.append("s",o),window.location.href="search-result.html?"+r})),this.initServiceWorker(),this.messages(),this.getUserDetails(),this.logout(),this.windowScroll()},o.prototype.initServiceWorker=function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.min.js").then((function(e){console.log("service worker registered")})).catch((function(e){console.log("service worker not registered",e)}))},o.prototype.messages=function(){e(".error-msgs").length&&e(document).on("click",".error-msgs .close",(function(){e(this).parents(".error-msgs").find("p").remove(),e(this).parent().hide()})),e(".success-msgs").length&&e(document).on("click",".success-msgs .close",(function(){e(this).parents(".success-msgs").find("p").remove(),e(this).parent().hide()}))},o.prototype.logout=function(){var o=this;e("#logout-btn").on("click",(function(){o.showContentLoader(e("#logged-user").find(".loader-wrap")),o.logoutUser()}))},o.prototype.loadImg=function(o,r){var n,i=this;if(o){if(!o.name.match(/.(jpg|jpeg|png|gif)$/i))return i.showError(r,"Please choose valid file","alert-success","alert-danger"),e("#choose-file").find("span").show(),void e("#choose-file").find(".btn-loader").hide();e(r).parents("form").find(".error-msgs").hide(),(n=new Image).onload=function(){if(this.width>160){return console.log(window.currentuser),e(".profile-image img").hide(),e(".profile-image img").attr("src","assets/images/client-thumb.png").show(),i.showError(r,"The file is too large. Allowed maximum size of 160 X 160","alert-success","alert-danger"),e("#choose-file").find("span").show(),void e("#choose-file").find(".btn-loader").hide()}i.uploadImage(o,r)},n.onerror=function(){error={flag:!0,msg:"Image load error"}},n.src=window.URL.createObjectURL(o),n.style.display="none",e(".profile-image img").attr("src",window.URL.createObjectURL(o))}},o.prototype.uploadImage=function(o,r){var n=this,i=new FormData;(i.append("image",o),e.API)&&e.API.profilePic("user/upload/profile-image",i).then((function(o){n.showError(r,"Image uploaded successfully","alert-danger","alert-success"),e("#choose-file").find("span").text("Change Profile Image")})).catch((function(o){if(o.responseJSON&&401===o.responseJSON.code){var i="Image upload failed";n.showError(r,i,"alert-success","alert-danger"),e(".profile-image img").attr("src",window.currentuser.user_details.image)}else{i="Please signin to update profile";n.showError(r,i,"alert-success","alert-danger"),e("#choose-file").find("span").show(),e("#choose-file").find(".btn-loader").hide()}})).finally((function(){e("#choose-file").find("span").show(),e("#choose-file").find(".btn-loader").hide()}))},o.prototype.showError=function(o,r,n,i){e(o).parents("form").find(".error-msgs").find("p").remove(),e(o).parents("form").find(".error-msgs").removeClass(n).addClass(i).append("<p>"+r+"</p>").fadeIn(200)},o.prototype.showLoader=function(){e(".fakeLoader").show()},o.prototype.hideLoader=function(){e(".fakeLoader").hide()},o.prototype.showContentLoader=function(o){e(o).addClass("show")},o.prototype.hideContentLoader=function(o){e(o).removeClass("show")},o.prototype.getUserDetails=function(){var o=this;e.API&&(o.showContentLoader(e("#auth-btn").parent().find(".loader-wrap")),e.API.get("user/details").then((function(e){e&&e.hasOwnProperty("user")&&o.fillProfile(e.user)})).catch((function(e){e.responseJSON&&401===e.responseJSON.code&&localStorage.clear()})).finally((function(){o.hideContentLoader(e("#auth-btn").parent().find(".loader-wrap"))})))},o.prototype.fillProfile=function(o){e("#auth-btn").parent().hide(),e("#logged-user").fadeIn(200);var r="assets/images/client-thumb.png";window.location.pathname.split("/").includes("theme")&&(r="../"+r),window.currentuser=o,o&&o.user_details&&o.user_details.image&&(r=o.user_details.image),e("#logged-user").find(".dropdown-toggle img").attr("src",r),window.currentuser&&e("#edit-user-name").length&&e("#edit-user-email").length&&(e("#edit-user-name").val(window.currentuser.username),e("#edit-user-email").val(window.currentuser.email)),window.currentuser.user_details&&(e(".profile-image img").length&&(window.currentuser.user_details.image&&e(".profile-image img").attr("src",window.currentuser.user_details.image),e("#choose-file").children().first().text("Change Profile Image")),e("#edit-profile-form").length&&e("#edit-profile-form").find(".form-control").each((function(){var o=e(this).attr("name"),r=window.currentuser.user_details[o];r?(e(this).val(r),e(this).parent(".app-label").addClass("up")):e(this).val("")})))},o.prototype.logoutUser=function(){var o=this;e.API&&e.API.get("user/logout").then((function(o){e("#logged-user").hide(),e("#auth-btn").parent().fadeIn(200),localStorage.clear(),window.location.reload()})).catch((function(e){console.log("logout user error --\x3e",e)})).finally((function(){o.hideContentLoader(e("#logged-user").find(".loader-wrap"))}))},o.prototype.windowScroll=function(){var o=e(document).outerHeight();e(window).on("scroll",(function(){var r=e(this).scrollTop();r>=20?e(".header").addClass("fixed-nav"):e(".header").removeClass("fixed-nav"),r>o/2?e(".back-top").addClass("show"):e(".back-top").removeClass("show")}))},e.App=new o,e.App.Constructor=o}(window.jQuery),function(e){"use strict";window.jQuery.App.init()}(),function(e){var o=function(){};o.prototype.init=function(){this.validateLogin(),this.validateRegister(),this.validateForgot(),this.validateReset()},o.prototype.validateLogin=function(){e("#login-form").length&&e("#login-form").validate({focusInvalid:!1,rules:{username:{required:!0},password:{required:!0},"validation-required":{required:!0}},errorPlacement:function(o,r){return e(r).siblings(".validation-error").removeClass("d-none"),!0},highlight:function(o){e(o).parents(".form-group").addClass("invalid-field")},unhighlight:function(o){e(o).parents(".form-group").removeClass("invalid-field"),e(o).siblings(".validation-error").addClass("d-none")},submitHandler:function(o){e(o).find("[type = 'submit']").addClass("disable-events");var r=convertSerializeObj(e(o).serializeArray());e.API&&e.API.postWithoutToken("user/login",r).then((function(r){if(e(o)[0].reset(),r&&r.hasOwnProperty("token")){var n=r.token.original;localStorage.setItem("token",n.access_token),window.location.reload()}})).catch((function(r){r.responseJSON&&401===r.responseJSON.code&&(e(o).find("#errorMsg").find("p").remove(),e(o).find("#errorMsg").append("<p>Invalid username or password.</p>"),e(o).find("#errorMsg").fadeIn(200))})).finally((function(){e(o).find("[type = 'submit']").removeClass("disable-events")}))}})},o.prototype.validateRegister=function(){e("#signup-form").length&&e("#signup-form").validate({focusInvalid:!1,rules:{username:{required:!0},email:{required:!0},password:{required:!0,minlength:6,maxlength:32},password_confirmation:{required:!0,equalTo:"#password_primary"},"validation-required":{required:!0}},errorPlacement:function(o,r){return"Please enter a valid email address."===o[0].innerText?e(r).siblings(".validation-error").text(o[0].innerText).removeClass("d-none"):"Please enter the same value again."===e(o[0]).text()?e(r).siblings(".validation-error").removeClass("d-none").text("Password and confirm password should be same"):"Please enter at least 6 characters."===e(o[0]).text()||"Please enter no more than 32 characters."===e(o[0]).text()?e(r).siblings(".validation-error").removeClass("d-none").text(e(o[0]).text()):e(r).siblings(".validation-error").addClass("d-none"),!0},highlight:function(o){e(o).parents(".form-group").addClass("invalid-field")},unhighlight:function(o){e(o).parents(".form-group").removeClass("invalid-field"),e(o).siblings(".validation-error").addClass("d-none")},submitHandler:function(o){e(o).find("[type = 'submit']").addClass("disable-events");var r=convertSerializeObj(e(o).serializeArray());e.API&&e.API.postWithoutToken("user/signup",r).then((function(r){if(e(o)[0].reset(),r&&r.hasOwnProperty("token")){var n=r.token.original;localStorage.setItem("token",n.access_token),window.location.href="/"}})).catch((function(r){if(r&&r.responseJSON){var n=r.responseJSON;if(n.code&&400===n.code&&n.error){var i=n.error;for(var t in i){var s="<p>"+i[t]+"</p>";e(o).find("#errorMsg").append(s)}e(o).find("#errorMsg").fadeIn(200)}}})).finally((function(){e(o).find("[type = 'submit']").removeClass("disable-events")}))}})},o.prototype.validateForgot=function(){e("#forgot-form").length&&e("#forgot-form").validate({focusInvalid:!1,rules:{email:{required:!0,email:!0},"validation-required":{required:!0}},errorPlacement:function(o,r){return e(r).siblings(".validation-error").removeClass("d-none"),!0},highlight:function(o){e(o).parents(".form-group").addClass("invalid-field")},unhighlight:function(o){e(o).parents(".form-group").removeClass("invalid-field"),e(o).siblings(".validation-error").addClass("d-none")},submitHandler:function(o){e(o).find("[type = 'submit']").addClass("disable-events");var r=convertSerializeObj(e(o).serializeArray());e.API&&e.API.postWithoutToken("user/forgot-password",r).then((function(r){console.log("data ==>",r),e(o)[0].reset(),"User not found"===r.message?(e(o).find("#successMsg").find("p").remove(),e(o).find("#successMsg").removeClass("alert-success").addClass("alert-danger").append("<p>Email id not match with our records.</p>")):(e(o).find("#successMsg").find("p").remove(),e(o).find("#successMsg").removeClass("alert-danger").addClass("alert-success").append("<p>Reset password mail has been send to your email address.</p>")),e(o).find("#successMsg").fadeIn(200)})).catch((function(r){if(err&&err.responseJSON){var n=err.responseJSON;n.code&&400===n.code&&n.error&&(e(o).find("#errorMsg").append("<p>Email id not match with our records. Please contact admin in case your are facing any issue.</p>"),e(o).find("#errorMsg").fadeIn(200))}})).finally((function(){e(o).find("[type = 'submit']").removeClass("disable-events")}))}})},o.prototype.validateReset=function(){e("#reset-form").length&&e("#reset-form").validate({focusInvalid:!1,rules:{password:{required:!0,minlength:6,maxlength:32},password_confirmation:{required:!0,equalTo:"#password_reset"},"validation-required":{required:!0}},errorPlacement:function(o,r){return"Please enter the same value again."===e(o[0]).text()&&e(r).siblings(".validation-error").removeClass("d-none").text("Password and confirm password should be same"),e(r).siblings(".validation-error").removeClass("d-none"),!0},highlight:function(o){e(o).parents(".form-group").addClass("invalid-field")},unhighlight:function(o){e(o).parents(".form-group").removeClass("invalid-field"),e(o).siblings(".validation-error").addClass("d-none")},submitHandler:function(o){e(o).find("[type = 'submit']").addClass("disable-events");var r=new URLSearchParams(window.location.search),n=r.get("token"),i=r.get("email");if(i&&i.length&&n&&n.length){var t=convertSerializeObj(e(o).serializeArray());if(t.token=n,t.email=i,e.API)e.API.postWithoutToken("user/reset-password",t).then((function(r){e(o)[0].reset(),e(o).find("#successMsg").append("<p>Password reset successfully. Please signin again.</p>"),e(o).find("#successMsg").fadeIn(200),setTimeout((function(){window.location.href="index.html"}),5e3)})).catch((function(r){if(r&&r.responseJSON){var n=r.responseJSON;n.code&&400===n.code&&n.error&&(e(o).find(".error-msgs").append("<p>Link has been expired.</p>"),e(o).find(".error-msgs").fadeIn(200))}})).finally((function(){e(o).find("[type = 'submit']").removeClass("disable-events")}))}}})},e.Auth=new o,e.Auth.Constructor=o}(window.jQuery),function(e){"use strict";window.jQuery.Auth.init()}();