var priceMapper={1:"12",2:"12",3:"4",4:"",5:"8",6:"",7:"4",8:"8",9:"16",10:"8",11:"12",12:"12",13:"",14:"",15:"",16:"8",17:"12",18:"4"};!function(e){var t=function(){};t.prototype.loadRazorpayScript=function(){setTimeout((function(){var t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",document.body.appendChild(t),e("#option-data #razorpay-btn").removeAttr("disabled")}),5e3)},t.prototype.getAuthentication=function(){var e=localStorage.getItem("token");return!(!e||""===e)},t.prototype.getDate=function(e){var t=new Date(e),a=t.getDate();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]+", "+a+" "+t.getFullYear()},t.prototype.init=function(){var t=window.location.pathname.split("/"),a=t[t.length-1],i=new URLSearchParams(window.location.search).get("success");"true"===i?e("#successModal").modal("show"):"false"===i&&e("#failureModal").modal("show"),this.loadRazorpayScript();var r=this;e.API&&e.API.getWithoutToken("product/details/"+a).then((function(e){if(e.product){var t=e.product.screenshot.split(".")[0],a=e.product.screenshot.split(".")[1],i=e.product.screenshot?t+"-sm."+a:"loading.jpg";e.product.added=JSON.parse(e.product.added),e.product.category=JSON.parse(e.product.category),e.product.changeLog=JSON.parse(e.product.changeLog),e.product.created_at=r.getDate(e.product.created_at),e.product.updated_at=r.getDate(e.product.updated_at),e.product.highlight1=JSON.parse(e.product.highlight1),e.product.highlight2=JSON.parse(e.product.highlight2),e.product.initialLog=JSON.parse(e.product.initialLog),e.product.screenshots=JSON.parse(e.product.screenshots),e.product.techUsed=JSON.parse(e.product.techUsed),e.product.themeFacts=JSON.parse(e.product.themeFacts),e.product.free=!(parseInt(e.product.price)>0),e.product.smImg=i,r.generateHTML(e.product),r.generateRelatedHTML(e.realtedProducts)}})).catch((function(e){console.log("generic error")})).finally((function(){e("#inner-content-wrapper").find(".loader-wrap").removeClass("show"),e("#inner-content-wrapper").find(".inner-content").removeClass("d-none")}))},t.prototype.runFn=function(){var t=this;e("#licence-types li").on("click",(function(){e(this).addClass("selected").siblings().removeClass("selected");var t=e(this).attr("data-tab");"multiple"===t&&(window.currentPck.multiple=!0),"single"===t&&(window.currentPck.multiple=!1),e("[data-id = "+t+"]").fadeIn().siblings().hide()})),e(".package-tabs .nav-link").on("click",(function(t){t.preventDefault(),window.history.pushState({},"",window.location.origin+window.location.pathname);var a=e(this).attr("href");e(a).addClass("show active").siblings().removeClass("show active"),e(this).addClass("active").parent().siblings().find(".active").removeClass("active")})),e("#preview-btn").on("click",(function(){e("html, body").animate({scrollTop:e(".package-tabs").offset().top-120},"slow"),e("#demo-tab").trigger("click")})),"#demos"===location.hash&&setTimeout((function(){e("#preview-btn").trigger("click")}),100),e("#successModal, #failureModal").on("hide.bs.modal",(function(){window.history.pushState({},"",window.location.origin+window.location.pathname)})),e("#options .pay-btn").on("click",(function(){var t=e(this).attr("button-selection"),a=e(this).attr("payment-type");e(this).addClass("selected").siblings().removeClass("selected"),e("#option-data").find("[data-id="+t+"]").addClass("active show").attr("payment-type",a).siblings().removeClass("active show")})),e("#razorpay-btn").on("click",(function(){t.getAuthentication()?(e(this).addClass("disable-events"),t.purchaseEvent()):e("#loginModal").modal("show")})),e("#paypal-btn").on("click",(function(){if(e.API){var t=this,a={product_id:window.currentPck.productId,multi:window.currentPck.multiple};e(this).addClass("disable-events"),e.API.post("payment/paypal",a).then((function(e){e.status&&(window.location.href=e.url)})).catch((function(a){e(t).removeClass("disable-events"),a&&a.noToken&&e("#loginModal").modal("show")}))}})),e("#free-purchase").on("click",(function(){if(e.API){var a={product_id:window.currentPck.productId},i=this;e(this).addClass("disable-events"),e.API.post("payment/free",a).then((function(e){t.downloadPackage()})).catch((function(t){t&&t.noToken?e("#loginModal").modal("show"):e("#failureModal").modal("show")})).finally((function(){e(i).removeClass("disable-events")}))}}))},t.prototype.purchaseEvent=function(){this.razorpayOrderCreate()},t.prototype.razorpayOrderCreate=function(){if(e.API){var t={product_id:window.currentPck.productId,multi:window.currentPck.multiple},a=this;e.API.post("razorpay/order/create",t).then((function(e){if(e){var t=a.razorpayOption(e.order_id),i=new Razorpay(t);i.open(),i.on("payment.failed",(function(e){throw console.log("failed resp",e),e}))}})).catch((function(e){console.log("create order error ==>",e)})).finally((function(){e("#razorpay-btn").removeClass("disable-events")}))}},t.prototype.razorpayOrderVerify=function(t){if(e.API){var a=this,i=Object.assign(t,{product_id:window.currentPck.productId,multi:window.currentPck.multiple});e.API.post("razorpay/order/verify",i).then((function(t){t&&200===t.code&&t.hasOwnProperty("product_name")?a.downloadPackage():e("#failureModal").modal("show")})).catch((function(e){}))}},t.prototype.downloadPackage=function(){if(e("#successModal").modal("show"),window.currentuser){var t=window.currentuser.id;window.open("https://lettstartdesign.com/laravel-backend/api/user/download-theme/"+window.currentPck.productId+"/"+t,"_blank")}},t.prototype.razorpayOption=function(e){var t=this,a={};return window.currentPck&&(a.product_name=window.currentPck.name,a.amount=window.currentPck.multiple?window.currentPck.multiPrice:window.currentPck.price),window.currentuser&&(a.email_address=window.currentuser.email),{name:"Lettstart Design",description:window.currentPck.name,image:"https://lettstartdesign.com/assets/images/logo-dark.png",order_id:e,handler:function(e){t.razorpayOrderVerify(e)},notes:a,theme:{color:"#2982de"}}},t.prototype.generateHighlights=function(t,a){var i=a.map((function(e){var t='<ul class="list-unstyled">';return t+='<li><i class="bx bxs-check-circle text-success h5 mb-0 mr-2 font-weight-normal"></i> <span>'+e+"</span></li>",t+="</ul>"}));e(t).html(i.join(""))},t.prototype.generateThemeFact=function(t,a){var i=Object.keys(a);a=i.map((function(e){var t='<div class="facts text-center">';return a[e].forEach((function(e){t+='<div class="card box-shadow-none">',t+='<div class="card-body">',t+='<h3 class="card-title h2">'+e.title+"</h3>",t+='<p class="card-text mb-0">'+e.text+"</p>",t+="</div>",t+="</div>"})),t+="</div>"})),e(t).html(a.join(""))},t.prototype.generateScreenshots=function(t,a){var i=a.screenshots.map((function(e){var t='<div class="theme-demos mb-3">';return t+='<div class="head-text">',t+='<h2 class="h3">'+e.title+"</h2>",t+="</div>",t+='<div class="demo-screenshot">',t+='<div class="row gutter-size-25">',t+=e.screens.map((function(e){var t='<div class="col-md-6 col-lg-4">';return t+='<div class="demo-theme-item">',t+='<a href="'+a.liveDemoBaseStr+e.link+'" target="_blank">',t+='<img src="../assets/images/screenshots/'+a.screenshotDir+"/"+e.img+'" class="img-fluid border-radius-1x" alt="index" />',t+="</a>",t+='<div class="desc">',t+="<h5>"+e.imgTitle+"</h5>",t+='<a href="'+a.liveDemoBaseStr+e.link+'" target="_blank">Live Preview</a>',t+="</div>",t+="</div>",t+="</div>"})).join(""),t+="</div>",t+="</div>",t+="</div>",t+="</div>"})),r=e("#demos .theme-facts").clone();e(t).html(i.join("")),e(t).append(r)},t.prototype.generateInitialLog=function(t,a){var i=a.initialLog.map((function(e){var t='<div class="logs">';return t+='<span class="bx '+e.icon+' text-primary mr-1"></span>',"Created:"===e.text?t+=e.text+" "+a.created_at:"Updated:"===e.text?t+=e.text+" "+a.updated_at:t+=e.text,t+="</div>"}));e(t).html(i.join(""))},t.prototype.generateTechUsed=function(t,a){var i=a.map((function(e){var t='<div class="tooltip-wrap">';return t+='<div class="tooltip bs-tooltip-top" role="tooltip">',t+='<div class="arrow"></div>',t+='<div class="tooltip-inner">'+e.tooltip+"</div>",t+="</div>",t+="<span>",t+='<i class="bx '+e.icon+" text-"+e.iconClass+' h2 mb-0"></i>',t+="</span>",t+="</div>"}));e(t).append(i.join(""))},t.prototype.generateHTML=function(t){t&&!t.updateDate&&(t.updateDate=t.createDate),window.currentPck=t,window.currentPck.multiPrice=5*t.price,window.currentPck.multiple=!1,e("#doc-btn").attr("href",t.docLink),e("#slider-area").children("img").attr("sr.hc","../assets/images/slider-screenshot"+t.screenshot).attr("srcset","../assets/images/slider-screenshot/"+t.smImg+" 766w, ../assets/images/slider-screenshot/"+t.screenshot+" 3000w").attr("alt",t.name),e("#single-use").html("<span>$</span>"+t.price),e("#multi-use").html("<span>$</span>"+5*t.price),t.free?(e("#payment-options").children().not("#free-purchase").remove("d-none"),e("#free-purchase").removeClass("d-none")):(e("#free-purchase").remove(),e("#payment-options").children().not("#free-purchase").removeClass("d-none")),this.generateTechUsed(".tech-details",t.techUsed),document.getElementById("overview-html").innerHTML=t.overviewHTML,this.generateHighlights("#highlight1",t.highlight1),this.generateHighlights("#highlight2",t.highlight2),this.generateThemeFact(".theme-facts",t.themeFacts),this.generateScreenshots("#demos",t),this.generateInitialLog(".initial-logs",t),this.runFn()},t.prototype.generateRelatedHTML=function(t){t&&t.length&&(e("#related-products").html(""),t.forEach((function(t){var a="",i=t.screenshot.split(".")[0],r=t.screenshot.split(".")[1],o=t.screenshot?i+"-sm."+r:"loading.jpg",n=priceMapper[t.id];a+='<div class="col-md-4"><div class="demo-item" id="'+t.id+'"><a href="'+t.detailLink+'" class="screenshot"><img src="../assets/images/slider-screenshot/'+t.screenshot+'" srcset="../assets/images/slider-screenshot/'+o+" 766w, ../assets/images/slider-screenshot/"+t.screenshot+' 3000w" alt="'+t.name+'" class="img-fluid w-100" width="714" height="456"/></a><div class="action-btn"><a href="'+t.detailLink+'#demos" title="Live Preview" class="btn btn-primary btn-sm">Live Preview</a></div><div class="theme-desc"><div class="title"><h3 class="h5"><a href="'+t.detailLink+'" title="'+t.name+'">'+t.name+"</a></h3><p>"+t.oneLinerDesc+'</p></div><div class="price"><h4 class="font-weight-bold">$'+t.price+'<span class="original-price">$'+n+'</span></h4><a class="category" href="'+t.catLink+'">'+t.mainCat+"</a></div></div></div></div>";var s=e.parseHTML(a);t.category&&t.category.indexOf("angular")>-1&&e(s).find(".screenshot").append("<div class='icon'><i class='bx bxl-angular'></i></div>"),e("#related-products").append(s)})))},e.PageProducts=new t,e.PageProducts.Constructor=t}(window.jQuery),function(e){"use strict";window.jQuery.PageProducts.init()}();